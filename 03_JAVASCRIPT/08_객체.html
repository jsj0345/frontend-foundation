<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>객체</title>

    <style>
        .area{
            background-color: burlywood;
            border: 1px solid black; 
        }

    </style>
</head>
<body>

    <!--for in, this 키워드, .과 대괄호로 필드 접근 하는 부분 중요-->

    <!-- 요소의 추가 및 삭제 클릭이 되면 메시지를 추가하는 형식으로 시험문제가 나옴-->
    <!-- 필수 입력 요소는 입력을 해야한다고 메시지를 출력. -->
    <!-- 조건을 걸고 보기-->


    <h1>객체</h1>

    <h3>객체 선언 및 호출</h3>
    
    <p>
        객체는 중괄호 {} 를 이용하여 생성하고 <br>
        중괄호 안에 객체에 필요로 하는 속성들을 정의한다. <br>
        속성 : 속성값의 형태로 정의함 (키:벨류) <br>
        속성값으로는 모든 자료형의 값을 담을 수 있다.
    </p>

    <pre>
        let 변수명 = {
            속성명 : 속성값,
            속성명 : 속성값,
            ...
        }
    </pre>

    <button onclick="test1();">확인</button>
    <div class="area" id="area1"></div>

    <script>
        function test1() {
            let arr = ['hello',99,true,55.5,['하나',2,3.0]];
            let product = {
                pName : '아이폰',
                price: 1550000,
                series : ['아이폰se','아이폰에어','아이폰','아이폰프로']
            };

            let area1 = document.querySelector("#area1");
            area1.innerHTML = "arr : " + arr + "<br>";
            area1.innerHTML += "product : " + product + "<br>";

            //product : [object Object]로 출력
            //객체 내부 속성에 접근하는 방법
            //방법1. 대괄호를 이용하여 접근하기 : 객체명['속성명']

            area1.innerHTML += "product['pName'] : " + product['pName'] + "<br>";
            area1.innerHTML += "product['price'] : " + product['price'] + "<br>";
            area1.innerHTML += "product['series'] : " + product['series'] + "<br>";
            area1.innerHTML += "product['series'][0] : " + product['series'][0] + "<br>";
            area1.innerHTML += "product['series'][1] : " + product['series'][1] + "<br>";
            area1.innerHTML += "product['series'][2] : " + product['series'][2] + "<br>";
            area1.innerHTML += "product.['series'][3] : " + product['series'][3] + "<br>";

            //대괄호를 이용하여 접근하는 방법은 다소 불편하다.(적기가 귀찮음)
            //근데 왜 쓰는걸까? 아래 스크립트 파일을 보자. 

            //방법2. 객체명.속성명
            area1.innerHTML += "product.pName : " + product.pName + "<br>";
            area1.innerHTML += "product.price : " + product.price + "<br>";
            area1.innerHTML += "product.series : " + product.series + "<br>";
            area1.innerHTML += "product.series[0] : " + product.series[0] + "<br>";
            area1.innerHTML += "product.series[1] : " + product.series[1] + "<br>";
            area1.innerHTML += "product.series[2] : " + product.series[2] + "<br>";
            area1.innerHTML += "product.series[3] : " + product.series[3] + "<br>";
        }
    </script>

    <hr>
    <h3>객체 생성 특수케이스 (속성명 제시시 반드시 문자열 형태로 제시해야하는 경우)</h3>

    <button onclick="test2();">확인</button>
    <div class="area" id="area2"></div>

    <script>
        function test2(){
            let user = {
                //속성명 제시시 공백이나 특수문자 포함될 경우 반드시 문자열 형태 제시
                userName: '김사원',
                "user Name" : '박사원',
                "age!!!!" : 20
            };

            console.log(user);

            let area2 = document.querySelector("#area2");

            area2.innerHTML +="userName : " + user.userName+"<br>";
            // area2.innerHTML +="user Name : " + user.user Name + "<br>";
            // area.innerHTML += "age!!!! : " + user.age!!!!+"<br>";
            // 속성명에 특수문자가 포함된 경우 객체명.속성명으로 접근할 수 없다.
            // 이때 대괄호와 문자열을 이용하는 속성 접근 방식을 사용한다.

            //["속성명"]을 이용한 문법으로 처리해보기
            area2.innerHTML += "user['user Name'] : " + user['user Name']+"<br>";
            area2.innerHTML += "user['age!!!!'] : " + user['age!!!!']+"<br>";
        }
    </script>

    <hr>

    <h3>객체에서의 반복문</h3>

    <p>
        객체가 가지고 있는 모든 속성들에 순차적으로 접근하고자 한다면 반복문 제시 <br>
        단, 단순 for loop문으로 사용 불가 for in문 사용해보기
    </p>

    <button onclick="test3();">확인</button>
    <div class="area" id="area3"></div>

    <script>
        function test3() {
            let area3 = document.querySelector("#area3");

            let menu = {
                name: "칼국수",
                price: 9000,
                place: '역삼'
            };

            //객체명.속성명으로 값을 추출
            area3.innerHTML += "menu.name : " + menu.name + "<br><hr>";

            //[표현법] for(var/let key in 객체) - key는 속성명
            for(let key in menu) { // 잘 알아두기!!

                console.log(key); // 각각의 속성명이 찍힘. key에는 해당객체에서 순차적으로 접근된 속성명이 담긴다.
                area3.innerHTML += "menu.key : " + menu.key + "<br>"; // 결과가 이상하게 나옴.
                //왜 이상하게 나올까? key가 name, price, place로 변환되기전에 menu에 있는 "key"라는 속성값으로 접근하기 때문임.
                //그럼 당연히 못찾음. (왜냐? key라는걸 정의하지도 않았는데 나올리가 없음!)
                //해당 key에 담겨진 속성명을 이용하려면 객체명[속성명] 형식을 이용해야한다.

                area3.innerHTML += "menu[key] : " + menu[key] + "<br>";
            }
        }
    </script>

    <h3>객체의 메소드 속성</h3>

    <p>
        객체의 속성중 함수 자료형인 속성을 메소드라고 부른다.
    </p>

    <button onclick="test4();">확인</button>
    <div class="area" id="area4"></div>

    <script>
        function test4() {
            let area4 = document.querySelector("#area4");

            let name = '김유저';
            let food = '감자';
            let kind = '사람';

            let dog = {
                name : '뽀삐',
                kind : '말티즈',
                eat : function(food) {
                    // this 키워드 중요!

                    //메소드 속성 내에서 객체 내에 있는 속성 지정해보기
                    //메소드 속성 내에서 객체 내에 있는 속성을 지정하려면 this 키워드를 이용해야한다.
                    //this : 메소드를 포함하고 있는 객체를 지정

                    //this는 중요함. 정확하게 알아두기. 

                    console.log(this); // 해당 객체를 가리킴. 

                    area4.innerHTML += this.kind+"종인 강아지 " + this.name + "가 " + food +"를 먹고있어요.";
                }
            };

            dog.eat('갈비');

            console.log(this);
        }
        
    </script>

    <hr>

    <h3>in과 with 키워드</h3> <!--여긴 이런게 있구나 이정도로만 보기 in정도는 보기-->

    <p>
        in : 객체 내에 해당 속성이 있는지 확인해주는 키워드 <br>
        with : 객체명 제시하는 것을 생략 가능하다.
    </p>

    <!--(input[id=""]+br)*4-->
    이름: <input type="text" id="name"><br>
    국어: <input type="text" id="kor"><br>
    수학: <input type="text" id="math"><br>
    영어: <input type="text" id="eng"><br>

    <button onclick="test5();">확인</button>
    <div class="area" id="area5"></div>

    <script>
        function test5() {
            let name = document.querySelector("#name");
            let kor = document.querySelector("#kor");
            let math = document.querySelector("#math");
            let eng = document.querySelector("#eng");

            let student = {
                name : name.value,
                kor : Number(kor.value),
                math : Number(math.value),
                eng : Number(eng.value),

                //합계를 구하는 메소드
                getSum : function() {
                    return this.kor + this.math + this.eng;
                },

                //평균을 구하는 메소드
                getAvg : function(){
                    return Math.round(this.getSum()/3); 
                },

                //toString 재정의
                //innerHTML 요소로 객체를 출력하면 내부적으로 toString 메소드 호출
                toString : function() {
                    return this.name + " " + this.kor + " " + this.math + " " + this.eng;
                }

                
            };

            let area5 = document.querySelector("#area5");

            area5.innerHTML += "student : " + student + "<br>";
            area5.innerHTML += "이름 : " + student.name + "<br>";
            area5.innerHTML += "국어 : " + student.kor + "<br>";
            area5.innerHTML += "수학 : " + student.math + "<br>";
            area5.innerHTML += "영어 : " + student.eng + "<br>";
            area5.innerHTML += "합계 : " + student.getSum() + "<br>";
            area5.innerHTML += "평균 : " + student.getAvg() + "<br>";

            //"속성명" in 개체명 : 해당 객체 내에 속성이 존재할 경우 true 아니면 false
            area5.innerHTML += "name이라는 속성이 있나요? : " + ('name' in student) + "<br>";
            area5.innerHTML += "kor이라는 속성이 있나요? : " + ('kor' in student) + "<br>";
            area5.innerHTML += "eng이라는 속성이 있나요? : " + ('eng' in student) + "<br>";
            area5.innerHTML += "math이라는 속성이 있나요? : " + ('math' in student) + "<br>";
            area5.innerHTML += "getSum이라는 속성이 있나요? : " + ('getSum' in student) + "<br>";
            area5.innerHTML += "toString이라는 속성이 있나요? : " + ('toString' in student) + "<br>";
            area5.innerHTML += "music이라는 속성이 있나요? : " + ('music' in student) + "<br>";

            //with : 객체명.속성명에서 객체명을 생략할 수 있음 (코드 간소화)
            with(student) {
                
                area5.innerHTML += "이름 : " + name + "<br>";
                area5.innerHTML += "국어 : " + kor + "<br>";
                area5.innerHTML += "수학 : " + math + "<br>";
                area5.innerHTML += "영어 : " + eng + "<br>";
                area5.innerHTML += "합계 : " + getSum() + "<br>";
                area5.innerHTML += "평균 : " + getAvg() + "<br>";
                //area5.innerHTML += "음악 : " + music + "<br>"; //없는내용이라 오류 발생.
                
            }
            
        }
    </script>

    <h3>객체의 속성 추가 및 제거</h3>

    <button onclick="test6();">확인</button>
    <div id="area6" class="area"></div>

    <script>
        function test6() {
            let student = {}; //빈 객체 생성

            console.log(student);

            //객체에 존재하지 않는 데이터를 추가하면 속성으로 추가된다.
            student.name = '김학생';
            student.hobby = ['축구','족구','농구'];
            student.age = 17;

            console.log(student); 

            //중복된 키 값으로 데이터 넣기
            student.age = 55; // 기존값에 덮어쓰기된다 (갱신)

            console.log(student);

            let area6 = document.querySelector("#area6");

            //with를 이용하여 추가작업이 가능한지 확인해보기
            //with는 조회의 목적으로 사용(추가불가)
            with(student) { 
                address = '역삼';
                grade = 3; 
                area6.innerHTML += name + "<br>";
                area6.innerHTML += hobby + "<br>";
                area6.innerHTML += age + "<br>";
                area6.innerHTML += address + "<br>";

            }

            console.log(student);

            area6.innerHTML += "student : " + student + "<br>";

            //toString이 재정의되어 있지 않기 때문에 [object Object]로 출력
            //toString 메소드 추가해보기
            student.toString = function() { 
                //메소드 속성을 추가할때도 내부속성에 접근하려면 this 키워드 사용
                return this.name + " " + this.age + " " + this.hobby;
            };

            area6.innerHTML += "student : " + student + "<br>";

            //객체 속성 제거
            delete(student.age);

            //delete 연산자로 객체 속성 지우기 delete student.name ()안써도 가능. 
            delete(student.name);
            delete student['hobby'];

            console.log(student); 

            area6.innerHTML += "student : " + student + "<br>"; 
        }

        


    </script>

    
    
</body>
</html>